# Use official Grafana Agent v0.32.0
FROM grafana/agent:v0.32.0

# Copy River configuration
COPY agent-config.river /etc/agent/config.river

# Ensure positions directory exists
RUN mkdir -p /tmp/agent/wal

# Run Grafana Agent with explicit config
CMD ["/usr/bin/grafana-agent", "run", "--config.file=/etc/agent/config.river"]
